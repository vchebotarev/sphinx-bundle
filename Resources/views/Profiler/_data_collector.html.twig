{% extends 'WebProfilerBundle:Profiler:layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        <img alt="Sphinx" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJElEQVRo3u2ZW4hWVRTHf+c41Vx0guphwIrUrAeTygokjMyY0oQoqH89ZEgvKmUXq4cIDAMjaNAkG2QoeonAJSVFFF2ohgIJw4GaKGhyJgkLjDKHUceavh7c33Dac853LnNmxuD84cB39ll73fbaa6+9PsgCM+s3s3UAgZmdDYxKCsysVicKHOUFwBGgBXhAUrfP6iCTh5ktN7OT48KdJn9LOsv9/gC4NZQUAE11SkkrgS0+u3E7Qk/Ux4WVDOLYN8CdTY64xw0MS2qPYXC9pH3/kRCRNBZjA8Bdkt5Mc2qNMx9Bgu7dwAbgC+B+SYN+ZF4M/JTGXVIQOk/UiZe6IJpAWPdaGCWQ9GUj7hN87p7Pou+R79dMMNrMWoDjmSTErbKZjfjjYYpjrsy7Qf8PsTQjser8Mx/oBS7Mwe8PYImkoWji+wG4NMPkl4EHC1lgZo8DXZHxHZIezbnqn0i62dGtBV6Li+zNE7IztEk6nrKLRyU1512DAWBBzKfLgUOSTnr0HcAA0BbdakGOTbEbuDthzghwnqRTpYSen0kaISwoY5ET9H210yvMYDb14n4BcAtwO3ATcA7Q77LtHkm9RdL1W47hrBwKvydpdVJJOAd4DnioJO+0SjoRZNzyh4HtwAs5hfQ2ShXfSArcMxe4J63QAt72hm9s8i8WDaqa1ICQdIdz9wmgeTzZ+Qxdtuzw5j+R1S+SWpzF3wUpR+LrktZEvh8D5sTwbJc0nJqunSXRI/G+qFB3h/DP6mafuZl9lFZidwC/xHx6Edgq6TePvh3YBDzjhj6VtCJ14cxsA9CdIyyHJM0rkirmAj8nfK4B6yX1FM5FDQJhoaSBqTiT64s+MBWHfmfp6bqBm0JJtdJdFNn5Vh2pFSpUmI66NCHZzeJ0c7ITeAxYUZJOLwHPA0ck/VVWYd3pCut7c7YtysJXwC5JryYaYGZXAKuB9UCHq/6DMzRyRoA1kvYGrr++qyCjo8DXwLtAj6Q/nTO2x5R+WbHVNUJuA1qz9onmAT+mePxb4GHggKSjKSG3H7i2oAGDkuZHeF0C7Eni1+SKg0EgNLMdTsmkvkcXcEMGJQ5NwoC9XuEyBFyX4JyxpKL9KXfPTMKYK3NfabAKnwPLcirfJ2lJxsSyGNiWdilYCuzLwG+xpP6Y+W3Ar8DslPnHJJ2bUfEgWqPmaQRuATZnIO0C3pDUF8NjEXC+e/09zmiP/mpgFbAWWOiGd0raOJlLTQgsBz7M0Rs5BYy6Zz+n/y884OQvc2fLZe6+3hIzfxi4StLB0k5iz6gngXXE94bz4h+gD3hW0jtTVkqkGNQKXOTKi231TkgCNgG7JR2e1loohzGPuJaDj42Sds5YMZfTiPeBlRl6XLkRTocBklb56djMnp7RcrqEcKoBs+v/NlWoUKEY/gWJrakrv/1jVAAAAABJRU5ErkJggg==" />
        {% set icon_class %}{% spaceless %}
            {% if collector.queries|length > 0 %}
                {% if collector.errors|length > 0 %}
                    sf-toolbar-status-red
                {% else %}
                    sf-toolbar-status-green
                {% endif %}
            {% endif %}
        {% endspaceless %}{% endset %}
        <span class="sf-toolbar-status {{ icon_class }}">{{ collector.queries|length }}</span>
        {% if collector.queries|length > 0 %}
            <span class="sf-toolbar-info-piece-additional-detail">{{ '%0.2f'|format(collector.time * 1000) }} ms</span>
        {% endif %}
    {% endset %}

    {% set text %}
        <div class="sf-toolbar-info-piece">
            <b>Queries: </b>
            <span class="sf-toolbar-status">{{ collector.queries|length }}</span>
        </div>
        {% if collector.queries|length > 0 %}
            <div class="sf-toolbar-info-piece">
                <b>Execution time: </b>
                <span class="sf-toolbar-status">{{ collector.time|number_format(2) }} ms</span>
            </div>
            <div class="sf-toolbar-info-piece">
                <b>Errors: </b>
                <span class="sf-toolbar-status sf-toolbar-status-{% if collector.errors|length > 0 %}red{% else %}green{% endif %}">{{ collector.errors|length }}</span>
            </div>
        {% endif %}
    {% endset %}
    {% include 'WebProfilerBundle:Profiler:toolbar_item.html.twig' with { 'link': true } %}
{% endblock %}

{% block head %}
    {{ parent() }}
{% endblock %}

{% block menu %}
    <span class="label">
        <span class="icon"><img alt="Sphinx" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKklEQVRo3u2YW4hNURjH/+u4zEWDBw8nJIPGw4wyeUCJSc0TiZQ3pcgYqUnMA0qUN8ll5MGrJ+TyInJrpLwczQOThAbJkyJzYYbh58E+2rPsy9r7HGNO7X/tzj7r8v8u69trfd+SXAD0Am2SZICpkkaMMQbAHjmL36gGdgdR9al0AC3AsL8B4Lvv/dYf7Yovvt8jNt0fO3KWqLuplTRB9BHYVBx83rOg37KuiJVRfvlBMDa7OBVVKIBznqEPgfq/1gGYJ+lt7KIZY2x/Lw9YA/xtxu8+Y4wJcmdgu4+w2//f179sTCx5jTWSvoTqH7fKwFAS1wIsSroeFRtL4xSvC4B3JMNHYL5N9NJx8llSoChkn9V+KiJUwnDPN26bHenFjsMBE2t9/fNCyIfTrMGrELIGoDpgfB4YDNTcUeBF4GeI0EHvaC1bhDlrmUspo9ET9Dz7oDNMnJ11IdAO3ASGvc/gqbcBrklLehUYTbh53ogirAO6KB9qXLbgIt4D+1MI6Y4S8MSysBB3sADX7fbJQYVFSFZjHLK5jZ6gr5Kq406rfECREX00jh2/BXgWJ+SC1d8fwl+XJDzfRGkHdFjdVQEcd+KE5EM0PQnMChg/HTjiG3ff1Zr2hGH5Ou1XPSeC9Cews+znsWs6bdIIcK4CUh76ranq35RW5IwxlD1t8bnmUnZaZsiQ4T/mqpOAKmA9cK+M2eAZYDYwpZzKtgLHU1xblAsFYHvcVWuTpHWSdknKS6pKexSNA4YkbTXGXBPQVoJnPgEPgE5ghs8ZJ0vgPAZcBoaS3BPVR1xwFNELrAVmOoRcoQQD+iyu+VF8tuDTMeQ9wDQHA66UYMCJBM4ZDRt0IEbIKLAjRtDDFMr3JNhYlrhUHyscBTeFzJ8GDDjM/5xAcZN2Kz3qaMxxoDmEoxFY7T1NDjKbgYPACx9/V6k1R05Si6TbkiY5TvsmacR7CpI+SOrx5K+SNFdSg1ev1wTMH5C01BjT969O5c6Iu+Gk+AE8Bjb8zzSjFljsFdZfYxTeC8yeyDlTR4jieyop8bsZd51UCUY8smw4VIlGdFh3PrVZYZIhQ2n4BbaRfhxDjbEIAAAAAElFTkSuQmCC" /></span>
        <strong>Sphinx</strong>

        <span class="count">
            <span {% if collector.errors|length > 0 %}style="background-color: #a33;"{% endif %}>{{ collector.queries|length }}</span>
            {% if collector.queries|length > 0 %}
                <span>{{ '%0.0f'|format(collector.time * 1000) }} ms</span>
            {% endif %}
        </span>
    </span>
{% endblock %}

{% block panel %}

    <h2>Sphinx</h2>

    <div class="metrics">
        <div class="metric">
            <span class="value">{{ collector.queries|length }}</span>
            <span class="label">Total queries</span>
        </div>
        <div class="metric">
            <span class="value">{{ '%0.2f'|format(collector.time) }}</span>
            <span class="label">Query time</span>
        </div>
    </div>

    <h3>Queries</h3>

    {% if collector.queries|length == 0 %}
        <div class="empty">
            <p>No queries were executed.</p>
        </div>
    {% else %}
        <table class="alt">
            <thead>
            <tr>
                <th class="nowrap">#</th>
                <th class="nowrap">Time</th>
                <th style="width:100%">Command</th>
            </thead>
            <tbody>
            {% for q in collector.queries %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td class="nowrap">{{ '%0.2f'|format(q.time) }} ms</td>
                    <td>{{ q.sql }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

{% endblock %}
